-- Datei: popcount_rom.vhd
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity popcount_rom is
    port (
        addr : in  std_logic_vector(7 downto 0);
        data : out std_logic_vector(3 downto 0)
    );
end entity;

architecture Behavioral of popcount_rom is
    type rom_t is array(0 to 255) of std_logic_vector(3 downto 0);
    constant ROM : rom_t := (
        "0000", "0001", "0001", "0010", "0001", "0010", "0010", "0011",
        "0001", "0010", "0010", "0011", "0010", "0011", "0011", "0100",
        "0001", "0010", "0010", "0011", "0010", "0011", "0011", "0100",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0001", "0010", "0010", "0011", "0010", "0011", "0011", "0100",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0001", "0010", "0010", "0011", "0010", "0011", "0011", "0100",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0100", "0101", "0101", "0110", "0101", "0110", "0110", "0111",
        "0001", "0010", "0010", "0011", "0010", "0011", "0011", "0100",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0100", "0101", "0101", "0110", "0101", "0110", "0110", "0111",
        "0010", "0011", "0011", "0100", "0011", "0100", "0100", "0101",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0100", "0101", "0101", "0110", "0101", "0110", "0110", "0111",
        "0011", "0100", "0100", "0101", "0100", "0101", "0101", "0110",
        "0100", "0101", "0101", "0110", "0101", "0110", "0110", "0111",
        "0100", "0101", "0101", "0110", "0101", "0110", "0110", "0111",
        "0101", "0110", "0110", "0111", "0110", "0111", "0111", "1000"
    );
begin
    process(addr)
    begin
        data <= ROM(to_integer(unsigned(addr)));
    end process;
end architecture;
